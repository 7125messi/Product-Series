# 直播协议

| 协议名称 | 优势                                                                                                                                                                                                                                              | 劣势                                                                                                                                                         |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| rtmp     | ※ 实时性高：一般能做到 3 秒内。※ 支持加密：rtmpe 和 rtmps 为加密协议。※ 稳定性高：在 PC 平台上 flash 播放的最稳定方式是 rtmp，如果做 CDN 或者大中型集群分发，选择稳定性高的协议一定是必要的。※ 一般主流编码器都支持该协议。                       | ※ 协议复杂：开发者写起来累，效率也不行。※ Cache 麻烦：流协议做缓存不方便。                                                                                   |
| http     | ※ 性能很高：http 的性能好，协议简单，高性能服务器也完善。如果分发的量特别大，譬如点播视频网站，没有直播的实时性要求，http 协议是最好选择。※ 没有碎片：http 相比 hls 没有碎片。※ 穿墙：http 协议是互联网唯一肯定会开放的协议，所以不存在封端问题。 | ※ 实时性差：延迟 10s 起步。※ 原生支持不好：PC 上 flash 对于 http 流支持还可以，但是移动端对于 http 的支持不是很完善                                          |
| hls      | ※ 性能好：和 http 一样。※ 穿墙：和 http 一样。※ 原生支持很好：iOS 上支持完美，Android 上支持差些。PC/flash 上现在也有各种 as 插件支持 HLS。                                                                                                       | ※ 实时性差：与 ts 切片长度有关，大约 3 个切片长度时间的延迟，基本上 HLS 的延迟在 10 秒以上。※ 文件碎片：若分发 HLS，码流低，切片较小时，会导致太多的文件碎片 |
| rtsp     | ※ 延迟低，一般都能够做到 500ms。※ 带宽好，时效率高。※ 倍速播放，主要是回放的时候提供的功能。※ 控制精准，任意选择播放点。                                                                                                                          | ※ 服务端实现复杂。※ 代理服务器弱：数量少，优化少。※ 无路由器防火墙穿透。※ 管流分离：需要 1-3 个通道。                                                        |
